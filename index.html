<head>
<title>Sophie Radeva</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
</head>
<body>

<div id="top" onclick="show_table()"><br>
  SOPHIE RADEVA
  <br>
</div>
<br>
<p style="display:inline" onclick="show_table()">HOME</p>  &ensp;   <p style="display:inline" onclick="show_about()" >ABOUT</p>
<br><br>
<div id="table">
  <table class="tg">
    <tr>
      <th id="1" class="tg-yw4l"></th>
      <th id="2" class="tg-yw4l"></th>
      <th id="3" class="tg-yw4l"></th>
    </tr>
  </table>
</div>

<div id="page" hidden></div>
</body>

<div id="about" hidden>
<h2>ABOUT ME</h2>
<p>Graphic Design Student at UWE</p>
<a href='https://www.instagram.com/sophieradeva/'>INSTAGRAM</a>
</div>
</body>

<script>

function get_work(){
  var table_count = 1;
  for(var i = 40; i > -1; i=i-1){
    var image_url = "work/" + i + "/img.jpg"
    if(image_exists(image_url)){
      $('#' + table_count).append("<img onclick='load(" + i + ")' src='work/" + i + "/img.jpg'></img>");
      table_count++;
      if(table_count > 3){
        table_count = 1;
      }
    }
    var image_url = "work/" + i + "/img.png"
    if(image_exists(image_url)){
      $('#' + table_count).append("<img onclick='load(" + i + ")' src='work/" + i + "/img.png'></img>");
      table_count++;
      if(table_count > 3){
        table_count = 1;
      }
    }
  }

}


function image_exists(image_url){

    var http = new XMLHttpRequest();

    http.open('HEAD', image_url, false);
    http.send();

    return http.status != 404;

}



function load(id){
  $("#table").fadeOut();
  console.log("hi");
    $("#page").html('');
  $.get('work/'+id+'/title.txt', function(data) {
    var title = data;
    $("#page").append("<h2> " + title + "</h2><p style='text-align:left'>");
    $.get('work/'+id+'/text.txt', function(data) {
        $("#page").append(data + "</p><br>");
        $.get('work/'+id+'/extra.txt', function(data) {
          if(data.length > 4){
            $("#page").append(data);
          }
        });
        $("#page").append("<br><table id = 'pagetable'><tr><th id='p1'></th><th id='p2'></th><th id='p3'></th></tr></table>");
        get_images(id);
        $("#table").promise().done(function(){
          $("#page").fadeIn();
        });
    });
  });
}

function get_images(id){
  var image_string = "";
  var table_count = 1;
  for(var i = 40; i > -1; i=i-1){
    var image_url = "work/" + id + "/images/" + i + ".jpg";
    if(image_exists(image_url)){
      $('#p' + table_count).append("<img src='" + image_url + "'></img>");
      table_count++;
      if(table_count > 3){
        table_count = 1;
      }
    }
    var image_url = "work/" + id + "/images/" + i + ".png";
    if(image_exists(image_url)){
      $('#p' + table_count).append("<img src='" + image_url + "'></img>");
      table_count++;
      if(table_count > 3){
        table_count = 1;
      }
    }
  }

}

function show_table(){
  $("#about").fadeOut();
  $("#page").fadeOut();
  $("#page").promise().done(function(){
    $('#table').fadeIn();
  });
}

function show_about(){
  $("#page").fadeOut();
  $('#table').fadeOut();
  $("#table").promise().done(function(){
    $('#about').fadeIn();
  });
}
///////////////////////////////////////////////

get_work();

</script>
